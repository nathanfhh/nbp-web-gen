# 貼圖模式

<TryItButton mode="sticker" prompt="一隻毛茸茸的橘色柴犬，圓圓的臉蛋，Q版可愛風格" />

貼圖模式可以一次生成多個表情貼圖，並自動分割成獨立圖片。

## 基本用法

以下示範如何生成一組 3×3（共 9 張）的柴犬辦公室貼圖：

### 步驟 1：選擇模式並輸入 Prompt

1. 選擇「貼圖」模式（Sticker）
2. 在「Prompt 描述」輸入角色描述：

```
一隻毛茸茸的橘色柴犬，圓圓的臉蛋，Q版可愛風格
```

::: tip 提示
你只需專注描述角色的外觀與風格，情境、構圖、表情等細節會由下方選項自動補充到 Prompt 中。
:::

### 步驟 2：設定選項

**佈局**
- 列數：3
- 行數：3
- 預覽會顯示「共 9 張貼圖」

**情境用途**
- 選擇「主管回覆」（適合辦公室場景）

**構圖 - 鏡位**
- 勾選「大頭」、「半身」、「全身」（可多選，讓貼圖更有變化）

**構圖 - 表情誇張度**
- 依喜好選擇「自然」、「誇張」或「崩壞」

### 步驟 3：生成貼圖表

1. 點擊「開始生成」按鈕
2. 等待 AI 生成完整貼圖表

![貼圖生成結果](/images/sticker-result.webp)

### 步驟 4：裁切貼圖

1. 點擊生成的圖片開啟燈箱
2. 點擊右上角的「裁切」按鈕

![燈箱裁切功能](/images/sticker-lightbox.webp)

3. 進入裁切工具後，調整背景移除設定：
   - **背景顏色**：系統會自動偵測背景色。如果辨識結果不正確或去背效果不佳，可點擊「選取顏色」手動從圖片中吸取正確的背景色
   - **容差值**：調整數值來控制背景移除的範圍
   - **邊緣侵蝕**：選擇 0～3px 的侵蝕量，移除去背後殘留在邊緣的雜色像素（預設 0px 不侵蝕）
   - **白底預覽**：建議開啟此功能，確保貼圖邊緣處於乾淨的狀態
4. 點擊「開始處理」，系統會自動偵測並分割成獨立貼圖

![裁切工具介面](/images/sticker-crop-tool.webp)

### 步驟 5：下載與編輯

裁切完成後，右側會顯示分割出的所有貼圖（本範例共 9 張）。

![裁切完成結果](/images/sticker-crop-result.webp)

**下載選項：**
- 下載為 PDF
- 下載為 ZIP 壓縮檔

**單張貼圖編輯：**

在裁切結果中，點擊任一張貼圖左上角的「編輯」按鈕（鉛筆圖示），可開啟背景移除工具：

![背景移除工具](/images/sticker-edit-tool.webp)

- **點擊移除**：直接點擊圖片上想要移除的區域
- **拖曳瞄準**：按住並拖曳可更精確地選擇要移除的位置
- **容差值**：調整數值控制移除範圍的大小
- **復原**：點擊左下角的復原按鈕可還原上一步操作

如果貼圖中有未連通的背景區塊（例如角色手臂圍成的空隙），可以透過這個工具將其移除並轉換為透明背景。

**角色萃取：**

如果你對這次生成的角色造型很滿意，希望未來生成的角色都能維持相同的外觀風格，可以使用「角色萃取」功能將其儲存。詳細說明請參閱 [角色庫](./character-library)。

## 貼圖選項說明

### 畫質

設定輸出圖片的解析度：**1K**、**2K**、**4K**。

### 寬高比

設定貼圖表的圖片比例：**1:1**、**3:4**、**4:3**、**9:16**、**16:9**。

### 佈局

設定貼圖表的列數與行數。建議總數控制在 4-9 張，太多可能會導致畫面擁擠、細節不足。

### 風格

可選擇預定義風格或自訂風格描述：

- **預設風格**：寫實攝影、水彩、油畫、素描、像素藝術、動漫、皮克斯 3D、復古、現代、抽象、極簡
- **自訂風格**：在輸入框中輸入你想要的風格描述

### 情境用途

預設情境會影響 AI 生成的表情和動作風格：

- **聊天回覆**：日常對話用的表情
- **群組互動**：適合群組聊天的反應貼圖
- **主管回覆**：辦公室場景、職場溝通用
- **情侶撒嬌**：甜蜜、撒嬌風格的表情
- **自訂**：可自行輸入特定的使用情境描述

### 文字相關

可設定貼圖上的文字口吻（正式、禮貌、朋友式、嘴砲式）和語言（繁中、英文、日文）。

### 構圖

- **鏡位**：大頭、半身、全身，可多選讓貼圖更有變化
- **表情誇張度**：自然、誇張、崩壞

## 貼圖網格裁切工具

<TryItButton path="sticker-grid-cutter" />

如果你已經有其他平台（如 ChatGPT、Midjourney 等）產生的網格拼圖貼圖，可以直接使用「貼圖網格裁切」工具上傳並裁切去背，無需透過 Mediator 生成。

### 兩種進入方式

貼圖裁切功能有兩個入口，適用於不同場景：

| 入口 | 位置 | 適用場景 |
|------|------|----------|
| **燈箱裁切** | 在 Mediator 生成的圖片 → 開啟燈箱 → 點擊「裁切」按鈕 | 裁切 Mediator 自己生成的貼圖表 |
| **網格裁切工具** | 貼圖模式主畫面的入口卡片，或直接訪問 `/sticker-grid-cutter` 頁面 | 上傳外部來源的網格貼圖圖片 |

兩者使用的是相同的裁切引擎（背景移除 → 邊緣侵蝕 → 區域偵測 → 自動分割），差別僅在圖片來源：一個從 Mediator 歷史紀錄載入，另一個從本機上傳。

## 自動分割

生成後，Mediator 會自動將貼圖表分割成獨立貼圖：

1. AI 生成完整貼圖表
2. 客戶端進行圖片分析
3. 使用 BFS 洪水填充演算法（8-connected）移除背景
4. 執行邊緣侵蝕（如有設定）
5. 偵測區域並自動切割

::: tip 提示
如果自動分割效果不佳，可以在燈箱中調整分割參數或手動選擇區域。
:::

### 邊緣侵蝕

去背後，貼圖邊緣有時會殘留一圈淺色的「顆粒感」像素。**邊緣侵蝕**功能可以按層移除這些邊界像素：

| 設定 | 效果 |
|------|------|
| **0px** | 不侵蝕（預設） |
| **1px** | 輕微清理，適合大多數情況 |
| **2px** | 中度侵蝕，邊緣明顯縮進 |
| **3px** | 強力侵蝕，適合背景殘留嚴重的圖片 |

::: warning 注意
侵蝕會讓貼圖整體向內縮小，過高的值可能會切到角色的細節（例如髮絲、觸鬚）。建議從 1px 開始嘗試。
:::

## 手動裁切模式

當自動分割無法正確區分貼圖時（例如貼圖之間距離太近、有重疊元素），可以切換到「手動裁切」模式，自行繪製分割線來定義裁切區域。

### 使用方式

1. 在裁切工具中，將「裁切模式」從「自動偵測」切換為「手動裁切」
2. 點擊「繪製分割線」按鈕進入繪製模式
3. **點擊**圖片設定起點，然後**按住並拖曳**來調整終點位置，放開完成繪製。系統會自動延伸線段至圖片邊緣
4. 重複步驟 3 繪製所需的分割線
5. 若要刪除某條線，點擊選取該線後按 Delete 鍵或點擊工具列的「刪除」按鈕
6. 繪製完成後點擊「開始處理」

![手動裁切模式](/images/manual-crop-mode.webp)

::: tip 提示
分割線的數量決定了最終裁切出的貼圖數量。例如，繪製 2 條橫線和 2 條直線會將圖片切成 3×3 = 9 個區域。
:::

### 處理結果

處理完成後會自動切換到「結果」分頁，顯示所有裁切出的貼圖。

![手動裁切結果](/images/manual-crop-result.webp)

在手動模式中，背景移除的「容差值」僅影響去背效果，不影響區域偵測——區域是根據您繪製的分割線來決定的。

### 快捷鍵

| 按鍵 | 功能 |
|------|------|
| `0` | 重置視圖縮放 |
| `Escape` | 取消目前正在繪製的線段 |
| `Delete` / `Backspace` | 刪除選取的線段 |

## 批次下載

分割完成後，你可以：

- 單獨下載某一個貼圖
- 批次下載全部（ZIP 壓縮檔）
- 下載為透明 PNG

## LINE 貼圖處理工具

<TryItButton path="line-sticker-tool" />

如果你想將生成的貼圖上架到 LINE Creators Market，可以使用內建的 LINE 貼圖處理工具，快速將貼圖調整為符合 LINE 規格的尺寸與格式。

### 進入工具

在貼圖模式的主畫面中，你會看到一個綠色的「LINE Sticker Tool」入口：

![LINE 貼圖處理工具入口](/images/line-sticker-tool-entry.webp)

點擊後即可進入 LINE 貼圖處理工具頁面。

### 功能特色

- **批次調整尺寸**：自動將貼圖調整為 LINE 規定的尺寸（最大 370×320 像素，且必須為偶數）
- **壓縮檔案大小**：確保每張貼圖符合 LINE 的檔案大小限制
- **一鍵打包下載**：將所有處理完成的貼圖打包成 ZIP 壓縮檔

### 使用方式

1. 將裁切完成的貼圖拖曳或上傳到工具中
2. 系統會自動處理尺寸與壓縮
3. 點擊下載按鈕，取得符合 LINE 規格的貼圖包

::: tip 提示
LINE 貼圖的詳細規格與上架流程，請參考 [LINE Creators Market 官方指南](https://creator.line.me/zh-hant/)。
:::

## 下一步

- [編輯模式](./image-editing) - 編輯生成的貼圖
- [角色庫](./character-library) - 儲存角色以保持一致性

<TryItButton mode="sticker" prompt="一隻毛茸茸的橘色柴犬，圓圓的臉蛋，Q版可愛風格" />
