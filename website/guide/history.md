# 歷史紀錄

所有生成的圖片和影片都會自動儲存到歷史紀錄中。

## 檢視歷史

歷史紀錄位於首頁下方，顯示所有生成結果。

### 篩選功能

可以按照生成模式篩選紀錄：

- 全部
- 生成
- 貼圖
- 編輯
- 故事
- 圖表
- 影片
- 簡報

## 紀錄內容

每筆紀錄包含：

| 項目 | 說明 |
|------|------|
| 縮圖 | 生成結果的預覽圖 |
| 音頻指示器 | 縮圖右上角的喇叭圖示，表示該簡報紀錄包含旁白音頻 |
| 提示詞 | 當時使用的提示詞 |
| 模式標籤 | 生成模式 |
| 時間 | 相對時間（如「5 分鐘前」） |
| 檔案大小 | 該筆紀錄佔用的儲存空間 |

## 操作選項

### 載入紀錄

點擊紀錄可以載入該筆的設定：

1. 點擊歷史紀錄項目
2. 確認要載入（會覆蓋目前的輸入和設定）
3. 提示詞和所有選項會被還原

### 預覽圖片/影片

點擊縮圖可以開啟 Lightbox 預覽：

- 圖片模式：可左右切換多張圖片
- 影片模式：可播放影片
- 簡報模式：如果有旁白音頻，底部會顯示音頻播放器；下載選單提供音頻下載和 MP4 影片匯出

### 刪除

點擊刪除按鈕可刪除單筆紀錄。

::: warning 注意
刪除後無法復原。
:::

### 清除全部

點擊「清除全部」可刪除所有歷史紀錄。

## 儲存空間

歷史紀錄儲存在瀏覽器中：

| 資料類型 | 儲存位置 |
|----------|----------|
| 紀錄資訊 | IndexedDB |
| 圖片/影片 | OPFS |
| 旁白音頻 | OPFS |

頁面上方會顯示目前的儲存空間使用量。

### 空間限制

OPFS 的空間限制取決於：
- 瀏覽器類型
- 裝置可用空間
- 通常至少有數 GB

## 匯出與匯入

點擊歷史紀錄區域右上角的傳輸圖示（⇄）可以開啟匯出/匯入面板。

![匯出/匯入面板](/images/history-export.webp)

### 匯出歷史紀錄

1. 選擇要匯出的紀錄
2. 點擊「匯出」
3. 下載 JSON 檔案

### 匯入歷史紀錄

1. 點擊「匯入」或拖放 JSON 檔案
2. 選擇要匯入的紀錄
3. 紀錄會加入到歷史中

## 跨裝置傳輸

支援透過 P2P 連線在兩台裝置間傳輸歷史紀錄和角色：

1. 在發送方選擇要傳輸的紀錄
2. 點擊「Cross-Device Sync」
3. 接收方輸入連線碼
4. 確認雙方顯示相同的驗證圖示
5. 點擊「Confirm & Start Transfer」開始傳輸

![P2P 驗證畫面](/images/history-p2p-verify.webp)

::: tip 提示
P2P 傳輸使用端對端加密，資料不會經過伺服器。雙方看到相同的 Emoji 圖示表示連線安全。
:::

::: info 關於 TURN Server
P2P 連線使用 WebRTC 技術。在某些網路環境下（如嚴格的 NAT 或防火牆），可能需要 TURN server 來中繼連線。系統預設使用 Google STUN server，你也可以在設定中配置 Cloudflare TURN 憑證以獲得更穩定的連線品質。
:::

## 下一步

- [角色庫](./character-library) - 從歷史紀錄建立角色
- [圖片編輯](./image-editing) - 編輯歷史紀錄中的圖片
- [簡報轉換](./slide-conversion) - 將歷史紀錄中的圖片轉換為 PPTX
