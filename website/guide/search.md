# 智慧搜尋

當歷史紀錄越來越多，智慧搜尋讓你快速找到過去的生成結果。結合關鍵字比對和語意理解，即使你不記得確切的提示詞，也能透過描述找到相關紀錄。

## 開啟搜尋

在歷史紀錄區域上方，點擊搜尋按鈕（🔍）開啟搜尋面板。

![搜尋面板](/images/search-modal.webp)

## 基本用法

1. 在搜尋框輸入關鍵字或描述
2. 搜尋結果會即時顯示
3. 點擊結果可在燈箱中預覽

### 搜尋結果

每筆搜尋結果包含：

| 項目 | 說明 |
|------|------|
| 縮圖 | 生成結果的預覽圖 |
| 模式標籤 | 生成模式（生成、貼圖、影片等） |
| 時間 | 生成的時間 |
| 摘要片段 | 匹配的提示詞片段，關鍵字會以螢光標記 |

## 搜尋策略

提供三種搜尋策略，適用於不同場景：

| 策略 | 說明 | 適用場景 |
|------|------|----------|
| 混合搜尋 | 結合關鍵字和語意搜尋（預設） | 大部分情況 |
| 語意搜尋 | 純語意理解，不需精確匹配 | 「找那張有夕陽的圖」 |
| 關鍵字搜尋 | 純 BM25 關鍵字比對 | 搜尋特定詞彙或名稱 |

::: tip 提示
混合搜尋是預設策略，在大多數情況下效果最好。如果你的描述比較模糊，可以嘗試切換到語意搜尋。
:::

## 模式篩選

你可以按照生成模式篩選搜尋結果：

- 全部
- 生成
- 貼圖
- 編輯
- 故事
- 圖表
- 影片
- 簡報
- Agent

## 排序方式

搜尋結果支援三種排序：

| 排序 | 說明 |
|------|------|
| 相關度 | 依匹配程度排序（預設） |
| 最新優先 | 依生成時間降序 |
| 最舊優先 | 依生成時間升序 |

## 首次使用

首次開啟搜尋面板時，系統會進行初始化：

1. **下載語言模型** — 用於語意搜尋的 AI 模型（約 33MB），進度會顯示在面板中
2. **建立索引** — 為所有歷史紀錄建立搜尋索引

::: info 說明
語言模型只需下載一次，之後會快取在瀏覽器中。索引建立後會持久儲存，下次開啟時不需重新建立。
:::


## 即時同步

搜尋索引會自動與歷史紀錄保持同步：

- **新增紀錄** — 生成完成後自動加入索引
- **刪除紀錄** — 刪除紀錄時同步移除索引
- **匯入紀錄** — 匯入歷史紀錄後自動補充索引
- **清除全部** — 清空歷史時同步清除索引

你不需要手動管理索引，系統會在背景自動完成。

## 偏好記憶

你的搜尋偏好會自動儲存，包含：

- 上次選擇的模式篩選
- 上次使用的搜尋策略
- 上次使用的排序方式

下次開啟搜尋面板時，會自動套用上次的設定。

## 多語言支援

搜尋引擎針對中日韓文（CJK）做了特別優化，能正確處理中文、日文、韓文的分詞，確保搜尋結果準確。同時也完整支援英文和其他語言的搜尋。

## 下一步

- [歷史紀錄](./history) - 管理所有生成紀錄
- [角色庫](./character-library) - 從歷史紀錄建立角色
