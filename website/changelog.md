# 更新日誌

此頁面記錄 Mediator 的版本更新內容。

## v0.28.3

_2026-02-16_

### 新功能
- **Embedding 探索器**: 新增模式篩選功能，以美化 chip 按鈕多選篩選不同生成模式的資料點

### 改進
- **Embedding 探索器**: 增大視覺化面板最小高度（300px → 450px）
- **Embedding 探索器**: Plotly 工具列移至左上角，恢復截圖下載按鈕
- **Embedding 探索器**: 圖例超出範圍時支援捲動

### 修復
- **Embedding 探索器**: 修正 Modal 開啟時滾輪事件穿透至背景頁面的問題

### 重構
- **模式定義**: 將生成模式列表統一至 `GENERATION_MODES` 常數（Single Source of Truth）

## v0.28.2

_2026-02-16_

### 改進
- **Embedding 探索器**: 新增「依記錄」著色模式，以 historyId 分群並用 20 色調色盤區分不同紀錄
- **Embedding 探索器**: 勾選「使用全部資料」時自動隱藏抽樣數量輸入框

### 修復
- **Embedding 探索器**: 修正 Plotly 圖例在中文介面下顯示英文模式名稱的問題
- **Embedding 探索器**: 修正「懸停呈現」標籤未翻譯（硬編碼為 "Hover:"）的問題
- **Embedding 探索器**: 修正 Plotly 工具列在行動裝置上被裁切的問題

## v0.28.1

_2026-02-15_

### 修復
- **智慧搜尋**: 修正 Agentic Vision 紀錄完全無法被搜尋到的問題（AI 回覆未索引、模式名稱 BM25 不匹配、快照未隨提取邏輯更新）
- **智慧搜尋**: 修正 Agent 紀錄索引時因對話無文字而被靜默跳過的問題，新增 prompt fallback 機制
- **智慧搜尋**: 修正零向量 embedding 被快取與持久化後永遠無法重試的問題
- **智慧搜尋**: 新增雙語模式標籤搜尋（如「agentic vision」、「智慧視覺」皆可搜尋到 Agent 模式紀錄）
- **智慧搜尋**: 無 API Key 時停用 Gemini embedding 引擎選項，避免靜默產生空向量
- **智慧搜尋**: 修正 Plotly 圖表重開時未重新渲染、localStorage 私密模式例外、IME 組字按 Enter 誤觸搜尋
- **燈箱**: 修正從搜尋結果開啟燈箱後按 ESC 會同時關閉燈箱與搜尋視窗的問題

### 測試
- 新增 extractAgentMessages 測試（11 個案例，測試總數 437）

## v0.28.0

_2026-02-15_

### 新功能
- **智慧搜尋**: 新增雙 Embedding 引擎 — Gemini Embedding API（768 維，雲端高品質）與本地 Transformers.js multilingual-e5-small（384 維，免費離線），可隨時切換
- **智慧搜尋**: 新增 Embedding 3D 探索器，使用 UMAP 降維與 Plotly.js 將 embedding 向量以互動式 3D 散佈圖視覺化
- **API Key**: Free Tier API Key 新增隱私提醒，提示 Google 可能使用免費層級資料進行模型訓練

### 改進
- **智慧搜尋**: 縮小 chunk 大小（500→200）與重疊（100→50），提升細粒度檢索品質
- **智慧搜尋**: 新增多 chunk 聚合計分機制，提高搜尋結果相關性
- **智慧搜尋**: Embedding 3D 探索器使用 lazy loading（Plotly.js ~4.8MB 僅在開啟時載入）

### 修復
- **智慧搜尋**: 修正 zero-vector 文件插入快照導致搜尋品質下降的問題
- **智慧搜尋**: 修正快照去重邏輯與 per-provider 獨立儲存問題
- **智慧搜尋**: 修正 Plotly 工具列位置遮擋圖表與 modal 高度裁切問題

### 文件
- 更新搜尋文件，新增雙引擎說明、隱私提醒與 3D 探索器使用教學
- 更新 API Key 管理文件，新增 Free Tier 隱私說明
- 更新 README 反映雙引擎與 3D 探索器功能

## v0.27.0

_2026-02-14_

### 新功能
- **智慧搜尋**: 新增歷史紀錄 RAG 混合搜尋系統，結合 BM25 關鍵字比對與語意向量搜尋（multilingual-e5-small）
- **智慧搜尋**: 支援三種搜尋策略（混合/語意/關鍵字）、模式篩選、多種排序方式
- **智慧搜尋**: 搜尋偏好自動儲存至 localStorage，下次開啟時還原
- **智慧搜尋**: 即時索引同步，新增/刪除/匯入紀錄時自動更新搜尋索引

### 修復
- **智慧搜尋**: 修正快照還原時 null embedding 導致搜尋失敗的問題
- **智慧搜尋**: 修正搜尋事件未及時註冊，導致生成完成時未即時索引的問題
- **i18n**: 補充遺漏的 common.close 翻譯 key
- **簡報轉換**: 修正 mergeTextRegions 收到 null 項目導致 TypeError 的問題

### 文件
- 新增智慧搜尋使用者指南（中/英文）
- 新增搜尋系統技術架構文件

### 測試
- 新增 search-core 純函式測試（50+ 測試案例）

### 維護
- 升級專案依賴

---

## 較早版本

### v0.26.x - 旁白語音、Agentic Vision、MP4 匯出與測試基礎建設

_2026-01-28 ~ 2026-02-12_

- **v0.26.22** _(02-12)_: 燈箱導航修正（View Transition 動畫衝突、資訊列重疊）
- **v0.26.21** _(02-09)_: Agentic Vision ghost 訊息修正、imageIndex 對齊、匯出匯入縮圖修正
- **v0.26.20** _(02-09)_: AbortController 修正 ghost API 請求消耗配額
- **v0.26.19** _(02-09)_: 防止快速連點重複生成 race condition
- **v0.26.18** _(02-06)_: Vitest 測試框架（319 個測試）、ESLint 環境修正
- **v0.26.17** _(02-06)_: MP4 解析度選擇（1080p/1440p/2160p）、音訊預覽比較、VBR 編碼
- **v0.26.16** _(02-04)_: 設定重設確認視窗、旁白播放器自動隱藏
- **v0.26.15** _(02-04)_: 旁白播放速度控制、自動播放、空白鍵快捷鍵
- **v0.26.14** _(02-03)_: 平行生成圖片與音訊、useApi 拆分重構
- **v0.26.13** _(02-03)_: 語音試聽、WebM/Opus 編碼取代 MP3
- **v0.26.12** _(02-03)_: Agentic Vision 智慧捲動、平台偵測快捷鍵、內容預覽展開
- **v0.26.11** _(02-01)_: PPTX 字體大小合併閾值修正
- **v0.26.10** _(02-01)_: 貼圖裁切結果面板滾動修正
- **v0.26.9** _(01-31)_: MP4 品質選擇、Agentic Vision 串流自動儲存
- **v0.26.8** _(01-30)_: Agentic Vision 清除對話、Android 相機支援
- **v0.26.7** _(01-30)_: 貼圖分割線 Undo/Redo、Agent 對話圖片燈箱
- **v0.26.6** _(01-29)_: 手動裁切模式、透明邊距自動裁剪
- **v0.26.5** _(01-29)_: Agentic Vision 模式（Gemini 3 Flash）
- **v0.26.4** _(01-29)_: Opus 編碼備援、逐字稿模型 ID 修正
- **v0.26.3** _(01-29)_: 單頁重新生成、crossfade 轉場效果
- **v0.26.2** _(01-28)_: 旁白音頻備份傳輸、匯出格式 v3
- **v0.26.1** _(01-28)_: 貼圖邊緣侵蝕、8-connected flood fill
- **v0.26.0** _(01-28)_: TTS 旁白語音生成、SearchableSelect 元件

### v0.25.x - 文件網站、簡報轉換增強與隱私優先

_2026-01-23 ~ 2026-01-28_

- **v0.25.23** _(01-28)_: 貼圖網格裁切獨立工具頁面、文件首頁循環影片
- **v0.25.21** _(01-27)_: 3D 香蕉模型拖拽旋轉物理效果
- **v0.25.20** _(01-26)_: 移除 GA4 追蹤、aspect-ratio 自適應字型修正
- **v0.25.19** _(01-25)_: 新增更新日誌頁面
- **v0.25.18** _(01-25)_: 簡報轉換離開頁面確認提示
- **v0.25.16** _(01-25)_: 區域編輯器鍵盤快捷鍵
- **v0.25.15** _(01-25)_: 梯形模式支援傾斜文字區域
- **v0.25.12** _(01-24)_: 首頁 Hero 區 3D 香蕉模型
- **v0.25.8** _(01-24)_: Gemini 重新處理確認對話框
- **v0.25.7** _(01-24)_: 深度連結、「試試看」按鈕、API Key 影片教學
- **v0.25.6** _(01-24)_: 延遲載入手繪畫布元件
- **v0.25.0** _(01-23)_: VitePress 文件網站、故事模式角色連貫性、sitemap 索引

## 較早版本

### v0.24.x - 手繪畫布與簡報轉換增強

_2026-01-20 ~ 2026-01-23_

- **v0.24.11** _(01-23)_: 修正 Web Worker 中 PDF.js 的 mock document、PPTX 圖片比例保持
- **v0.24.10** _(01-22)_: 手繪功能 UX 改善：導航守衛與顏色選擇器重新定位
- **v0.24.9** _(01-22)_: 新增手繪畫布平移工具
- **v0.24.8** _(01-22)_: 修正行動裝置上參考圖片與角色庫的版面重疊
- **v0.24.0** _(01-20)_: 簡報轉換設定行為文件、Gemini 確認彈窗、WYSIWYG 設定、故事模式部分成功處理

### v0.23.x - SEO 與 OCR 模型選擇

_2026-01-19_

- **v0.23.7**: 修正貼圖裁切按鈕 SVG、無障礙標籤、LCP 優化
- **v0.23.6**: 新增靜態 HTML 生成與每頁 SEO meta 標籤
- **v0.23.5**: PWA 修正、canonical URL 防重複內容
- **v0.23.4**: 新增 JSON-LD 結構化資料、SPA 路由修正
- **v0.23.3**: Toast 滑動關閉手勢、區域選取工具、beforeunload 保護
- **v0.23.2**: 燈箱編輯區域按鈕、OCR 模型大小選擇（Server/Mobile）自動降級
- **v0.23.1**: 智慧捲動（使用者向上捲動時停止自動捲動）、Free Tier API Key 分流
- **v0.23.0**: PPTX 動態文字顏色提取

### v0.22.x - 區域編輯器與 OCR 統一架構

_2026-01-18 ~ 2026-01-19_

- **v0.22.3** _(01-19)_: 區域編輯器復原/重做功能
- **v0.22.2** _(01-19)_: 分隔線工具、縮放放大鏡
- **v0.22.1** _(01-18)_: 高度為基準的字體大小計算
- **v0.22.0** _(01-18)_: Canvas 測量字體大小、CPU/GPU OCR 統一架構

### v0.21.x - WebGPU OCR 與區域編輯

_2026-01-17 ~ 2026-01-18_

- **v0.21.5** _(01-18)_: GPU 記憶體不足時自動降級到 CPU
- **v0.21.4** _(01-18)_: 純 XY-Cut 版面分析、修正 BGR 順序
- **v0.21.3** _(01-17)_: WebGPU 偵測改善
- **v0.21.2** _(01-17)_: 清除模型快取功能、行動裝置 WebGPU 支援
- **v0.21.1** _(01-17)_: 可拖曳區域編輯工具列、自動產生 PPTX 檔名
- **v0.21.0** _(01-17)_: 手動 OCR 區域編輯、Tesseract.js 備援、統一 OCR 介面

### v0.20.x - 簡報轉 PPTX 轉換器

_2026-01-16_

- **v0.20.3**: 排除圖片資料於 localStorage 持久化
- **v0.20.2**: 簡報模式中新增 PPTX 轉換器橫幅
- **v0.20.1**: 檔案上傳模式、處理計時器、OCR JSON 覆蓋層
- **v0.20.0**: 簡報轉 PPTX 轉換器、雙 API Key 管理、圖片比較彈窗

### v0.19.x - AI 內容分割器

_2026-01-15_

- **v0.19.0**: AI 內容分割彈窗、每頁風格指引、生成進度條與 ETA

### v0.18.x - 簡報模式

_2026-01-15_

- **v0.18.0**: 簡報模式，支援參考圖片

### v0.17.x - 影片生成與品牌重塑

_2026-01-14 ~ 2026-01-15_

- **v0.17.3** _(01-15)_: 重構影片 metadata
- **v0.17.2** _(01-15)_: 圖片生成遷移至 @google/genai SDK
- **v0.17.1** _(01-15)_: 移除 generateAudio（Gemini API 不支援）
- **v0.17.0** _(01-14)_: 影片生成模式（Veo 3.1 API）、品牌重塑為 Mediator

### v0.16.x - 角色庫儲存遷移

_2026-01-14_

- **v0.16.0**: 角色圖片遷移至 OPFS

### v0.15.x - 使用者導覽

_2026-01-12 ~ 2026-01-13_

- **v0.15.5** _(01-13)_: 防止貼圖裁切時意外資料遺失
- **v0.15.4** _(01-13)_: 修正導覽提示與生成按鈕重疊
- **v0.15.3** _(01-13)_: 歷史紀錄依生成模式篩選
- **v0.15.2** _(01-13)_: 允許不完全符合規範時下載
- **v0.15.1** _(01-12)_: 行動裝置導覽與角色資訊響應式版面
- **v0.15.0** _(01-12)_: 新使用者導覽、主題類型圖示、主題下拉選單自動捲動

### v0.14.x - 季節主題

_2026-01-12_

- **v0.14.0**: 新增季節主題（春、夏、秋、冬）

### v0.13.x - 更多主題

_2026-01-11 ~ 2026-01-12_

- **v0.13.3** _(01-12)_: 統一模式顏色為品牌色
- **v0.13.2** _(01-12)_: 淺色主題深色覆蓋層徽章使用白色文字
- **v0.13.1** _(01-12)_: 新增 Matcha、Gruvbox、Everforest 主題
- **v0.13.0** _(01-11)_: 新增 Espresso、Mocha、Nord 主題

### v0.12.x - 主題系統完善

_2026-01-11_

- **v0.12.1**: 消除主題切換動畫結束時的閃爍
- **v0.12.0**: 新增暖色主題、語意色彩 token

### v0.11.x - 語意色彩 Token

_2026-01-11_

- **v0.11.1**: 貼圖工具淺色模式文字可見性、主題系統增強
- **v0.11.0**: 主題系統模組化重構、語意色彩 token 遷移

### v0.10.x - LINE 貼圖封面與程式碼重構

_2026-01-10 ~ 2026-01-11_

- **v0.10.4** _(01-11)_: 抽取 HistoryTransfer 為模組化元件
- **v0.10.3** _(01-11)_: 抽取 LineStickerToolView 為模組化元件
- **v0.10.2** _(01-11)_: 抽取 ImageLightbox 為模組化 composables
- **v0.10.1** _(01-11)_: 抽取 usePeerSync、StickerCropper 為模組化 composables
- **v0.10.0** _(01-10)_: LINE 貼圖封面圖、偶數尺寸支援

### v0.9.x - 角色萃取與 LINE 貼圖工具

_2026-01-09_

- **v0.9.2**: 切換貼圖時保留編輯模式設定
- **v0.9.1**: WebRTC 同步支援角色資料
- **v0.9.0**: 角色萃取功能、LINE 貼圖規範工具

### v0.8.x - 深色主題重設計

_2026-01-09_

- **v0.8.0**: Slate Blue Pro 深色主題

### v0.7.x - WebRTC 同步與批次下載

_2026-01-07 ~ 2026-01-09_

- **v0.7.13** _(01-09)_: Bundle 大小優化、程式碼分割與延遲載入
- **v0.7.12** _(01-09)_: 貼圖裁切器二次去背增強
- **v0.7.11** _(01-08)_: Toast 淺色模式高對比設計
- **v0.7.10** _(01-08)_: 淺色模式勾選框顏色統一、選擇性匯出/同步
- **v0.7.9** _(01-08)_: TURN 開關、自動斷線、主題修正
- **v0.7.8** _(01-08)_: 修正傳輸統計準確性、per-record ACK、背壓控制
- **v0.7.7** _(01-07)_: TURN 設定遷移至 Cloudflare API
- **v0.7.6** _(01-07)_: P2P 跨裝置同步（含 TURN 支援）
- **v0.7.5** _(01-07)_: 統一燈箱下載選單、主題修正
- **v0.7.4** _(01-07)_: 移除 IndexedDB 設定 store 死碼
- **v0.7.3** _(01-07)_: 歷史紀錄 ZIP/PDF 批次下載、匯出/匯入功能
- **v0.7.2** _(01-07)_: 歷史紀錄時間戳完整日期提示
- **v0.7.1** _(01-07)_: 新增 CLAUDE.md、dayjs 相對時間
- **v0.7.0** _(01-07)_: PDF 批次下載（Web Worker）、貼圖唯一檔名

### v0.6.x - GA4 追蹤與 PWA

_2026-01-05 ~ 2026-01-06_

- **v0.6.7** _(01-06)_: 貼圖裁切器返回手勢支援
- **v0.6.6** _(01-06)_: 版本號更新通知
- **v0.6.5** _(01-06)_: 還原為投影式貼圖分割（YAGNI）
- **v0.6.4** _(01-06)_: PWA 動態主題色、CCL 過濾優化
- **v0.6.3** _(01-06)_: 貼圖分割 Web Worker + CCL 演算法優化
- **v0.6.2** _(01-06)_: PWA 支援
- **v0.6.1** _(01-05)_: Google Analytics 4 追蹤
- **v0.6.0** _(01-05)_: 程式碼大重構與 DRY 改善

### v0.5.x - 貼圖模式與國際化

_2026-01-04 ~ 2026-01-05_

- **v0.5.5** _(01-05)_: SEO meta 標籤、GitHub Pages 部署
- **v0.5.4** _(01-05)_: 抽取 GitHubLink 元件
- **v0.5.3** _(01-04)_: 貼圖處理覆蓋層動畫、BFS flood fill 優化
- **v0.5.2** _(01-04)_: 貼圖裁切器版面與捲動改善
- **v0.5.1** _(01-04)_: 貼圖裁切器行動裝置版面
- **v0.5.0** _(01-04)_: 貼圖模式（含裁切與進階選項）

### v0.4.x - OPFS 圖片儲存

_2026-01-04_

- **v0.4.2**: 忽略 .gemini-clipboard 目錄
- **v0.4.1**: 生成歷史對齊與捲軸間距調整
- **v0.4.0**: OPFS 圖片儲存、WebP 壓縮

### v0.3.x - 觸控手勢

_2026-01-03_

- **v0.3.0**: 燈箱觸控手勢支援

### v0.2.x - Hero 區段

_2026-01-03_

- **v0.2.0**: Hero 區段動畫與滾動效果

### v0.1.x - 初始版本

_2026-01-03_

- **v0.1.0**: 初始版本
  - AI 圖片生成（Gemini API）
  - 多圖上傳、燈箱縮放/平移
  - 思考過程顯示、Toast 通知
  - 歷史紀錄儲存
